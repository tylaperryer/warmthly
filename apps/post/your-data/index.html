<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="theme-color" content="#fff6f1" />
  <meta name="color-scheme" content="light" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Your Data - Warmthly</title>
  <link rel="preconnect" href="https://www.warmthly.org">
  <link rel="preconnect" href="https://post.warmthly.org">
  
  <link rel="icon" type="image/png" sizes="32x32" href="/candle-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/candle-16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/candle-apple.png">
  <link rel="stylesheet" href="/styles/post.css">
</head>
<body class="fonts-loading">
  <div class="top-left-heading">
    <a href="https://www.warmthly.org" class="warmthly-link">Warmthly</a>
  </div>
  
  <div class="stoplight-container">
    <div class="stoplight" id="stoplight">
      <div class="stoplight-dot red"></div>
      <div class="stoplight-dot yellow"></div>
      <div class="stoplight-dot green"></div>
    </div>
    <div class="dropdown-menu" id="dropdown-menu">
      <a href="https://www.warmthly.org" class="dropdown-item">Home</a>
      <a href="https://mint.warmthly.org" class="dropdown-item">Mint</a>
      <a href="https://post.warmthly.org" class="dropdown-item">Post</a>
    </div>
  </div>

  <div class="container container-narrow" id="main-content" role="main">
    <h1 class="page-title">Your Data</h1>
    <p class="main-text">
      <b>Radical Transparency:</b> This is everything we store about you. If you see something we didn't mention, <a href="/post/report.html">report it</a>.
    </p>

    <div class="section">
      <h2 class="section-title">What We Know About You</h2>
      
      <div class="data-item">
        <strong>Cookie Popup Seen:</strong>
        <span id="cookieData">Not stored</span>
        <button onclick="deleteCookieData()">Delete</button>
      </div>
      
      <div class="data-item">
        <strong>Vote Data:</strong>
        <span id="voteData">No vote recorded</span>
        <button onclick="deleteVoteData()">Delete</button>
      </div>
      
      <div class="data-item">
        <strong>Report Submissions:</strong>
        <span id="reportData">None</span>
        <button onclick="viewReports()">View</button>
      </div>
    </div>

    <div class="actions">
      <button onclick="exportAllData()">Export All My Data</button>
      <button onclick="deleteAllData()" class="danger">Delete All My Data</button>
    </div>
  </div>

  <script>
    // --- NATIVE FONT LOADING ---
    if (document.fonts && document.fonts.ready) {
      document.fonts.ready.then(() => {
        document.body.classList.remove('fonts-loading');
        document.body.classList.add('fonts-loaded');
      });
      
      // Fallback timeout
      setTimeout(() => {
        document.body.classList.remove('fonts-loading');
        document.body.classList.add('fonts-loaded');
      }, 3000);
    } else {
      // Fallback for older browsers
      document.body.classList.remove('fonts-loading');
      document.body.classList.add('fonts-loaded');
    }
    // --- END FONT LOADING ---

    const stoplight = document.getElementById('stoplight');
    const dropdownMenu = document.getElementById('dropdown-menu');
    let isMenuOpen = false;

    function toggleMenu() {
      isMenuOpen = !isMenuOpen;
      stoplight.classList.toggle('active', isMenuOpen);
      dropdownMenu.classList.toggle('active', isMenuOpen);
    }

    stoplight.addEventListener('click', (e) => {
      e.stopPropagation();
      toggleMenu();
    });

    document.addEventListener('click', (e) => {
      if (!stoplight.contains(e.target) && !dropdownMenu.contains(e.target) && isMenuOpen) {
        toggleMenu();
      }
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && isMenuOpen) {
        toggleMenu();
      }
    });

    dropdownMenu.addEventListener('click', (e) => {
      e.stopPropagation();
    });

    // Placeholder functions
    function deleteCookieData() { alert('Functionality coming soon'); }
    function deleteVoteData() { alert('Functionality coming soon'); }
    function viewReports() { alert('Functionality coming soon'); }
    function exportAllData() { alert('Functionality coming soon'); }
    function deleteAllData() { 
      if (confirm('Are you sure you want to delete all your data? This cannot be undone.')) {
        alert('Functionality coming soon');
      }
    }
  </script>
</body>
</html>

